<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-01-28 Fri 15:11 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="ChongChong He" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="css/org.css" type="text/css" />
<link rel="stylesheet" href="css/custom.css" type="text/css" />
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href="./index.html"> UP </a>
 |
 <a accesskey="H" href="./index.html"> HOME </a>
</div><div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org553b4e0">1. Hydrodynamics</a>
<ul>
<li><a href="#org7316285">1.1. Hydrodynamic equations</a></li>
<li><a href="#subsec:time">1.2. Time Scales</a>
<ul>
<li><a href="#free-fall-time">1.2.1. Free fall time</a></li>
<li><a href="#sound-speed">1.2.2. Sound speed</a></li>
<li><a href="#alfven-wave">1.2.3. Alfven wave</a></li>
<li><a href="#velocity-dispersion">1.2.4. Velocity dispersion</a></li>
</ul>
</li>
<li><a href="#jeans-mass">1.3. Jeans Mass</a></li>
<li><a href="#subsec:bondi">1.4. Bondi Accretion</a>
<ul>
<li>
<ul>
<li><a href="#hoyle-and-lyttleton-accretion">1.4.0.1. Hoyle and Lyttleton accretion</a></li>
<li><a href="#bondi-accretion">1.4.0.2. Bondi Accretion</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#subsec:other">1.5. Other topics</a>
<ul>
<li><a href="#org47f92d5">1.5.1. Viscosity</a></li>
<li><a href="#reynolds-number">1.5.2. Reynolds Number</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org9e55275">2. MHD</a>
<ul>
<li><a href="#orgfa902cd">2.1. MHD</a></li>
</ul>
</li>
<li><a href="#hydrodynamic Al-simulations">3. Codes</a>
<ul>
<li><a href="#methods-and-code">3.1. Hydro Methods and Codes, Summary</a></li>
<li><a href="#sec:ramses">3.2. RAMSES</a>
<ul>
<li><a href="#summary">3.2.1. Summary</a></li>
<li><a href="#features">3.2.2. Features</a></li>
<li><a href="#m1-closure">3.2.3. M1 closure</a></li>
<li><a href="#cooling-function">3.2.4. Cooling Function</a>
<ul>
<li><a href="#orgf389363">3.2.4.1. Thermal update</a></li>
<li><a href="#orgf89dfe9">3.2.4.2. In code</a></li>
<li><a href="#orge644929">3.2.4.3. Other notes</a></li>
</ul>
</li>
<li><a href="#org5fecfab">3.2.5. Sink particles</a></li>
</ul>
</li>
<li><a href="#n-body">3.3. N-body</a></li>
<li><a href="#hydro">3.4. Hydro Codes</a>
<ul>
<li><a href="#orgb66a838">3.4.1. Fire</a></li>
<li><a href="#org677fc9a">3.4.2. </a></li>
</ul>
</li>
<li><a href="#observations">3.5. Mock Observations</a>
<ul>
<li><a href="#stellar-population-sythesis">3.5.1. Stellar population sythesis</a></li>
<li><a href="#filters">3.5.2. Filters</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org166d59f">4. Simulation Projects</a>
<ul>
<li><a href="#org8fa54d5">4.1. FIRE: Feedback In Realistic Environments</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="HTML" id="orgd03aa4b">
<p>
\(
	  \newcommand{\dif}{\,\mathrm{d}}
	  \newcommand{\sci}[2]{#1 \times 10^{#2}}
	  \def\num#1{\numx#1}\def\numx#1e#2{{#1}\mathrm{e}{#2}}
	  \newcommand{\msun}{{\rm M}_\odot}
	  \newcommand{\si}[1]{{\rm #1}}
\)
</p>

</div>

<div id="outline-container-org553b4e0" class="outline-2">
<h2 id="org553b4e0"><span class="section-number-2">1</span> Hydrodynamics</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org7316285" class="outline-3">
<h3 id="org7316285"><span class="section-number-3">1.1</span> Hydrodynamic equations</h3>
<div class="outline-text-3" id="text-1-1">
<p>
My notes: "Notability::Research:Topics:19. Fluid dynamics"
</p>

<p>
<b>Summary</b>
We introduce a <i>material derivative</i> \(D/Dt = \partial/\partial t + \mathbf{v} \cdot \nabla\). It is the derivative following the gas flow, defined as \(D Q / Dt = \frac{Q(t+\delta t, {\bf x} + {\bf v}\delta t) - Q(t, {\bf x})}{\delta t}\). Then, the <i>Euler equations of fluid</i> is easily represented as
</p>
\begin{align}
\frac{D \rho}{D t} &= - \rho \nabla \cdot {\bf v} \\
\frac{D {\bf v}}{D t} &= - \frac{\nabla p}{\rho} + {\bf g} \\
\frac{D e}{D t} &= - \frac{\nabla \cdot (p {\bf v})}{\rho}
\end{align}
<p>
The first equation, the equation of continuity, can be derived by inspecting a volume of fluid, in which the outflow rate equals the change in mass, and we obtain \(\partial \rho / \partial t + \nabla \cdot (\rho {\bf v}) = 0\). The conversion between the two different form can be acheived by using the expansion of \(\nabla \cdot (\rho {\bf v})\). 
</p>
</div>
</div>

<div id="outline-container-subsec:time" class="outline-3">
<h3 id="subsec:time"><span class="section-number-3">1.2</span> Time Scales</h3>
<div class="outline-text-3" id="text-subsec:time">
</div>

<div id="outline-container-free-fall-time" class="outline-4">
<h4 id="free-fall-time"><span class="section-number-4">1.2.1</span> Free fall time</h4>
<div class="outline-text-4" id="text-free-fall-time">
<p>
Assume mean molecular weight \(\mu = 1.4\), the global free-fall time of a
cloud with particle number density \(n\) is given by \[\label{eq:ff}
t_{{\rm ff}} = \sqrt{\frac{3\pi}{32G\rho_{0}}} \approx 1.376~{\rm Myr}
\cdot \left(\frac{n}{10^3 \si{cm^{-3}}}\right)^{-1/2}\]
</p>
</div>
</div>

<div id="outline-container-sound-speed" class="outline-4">
<h4 id="sound-speed"><span class="section-number-4">1.2.2</span> Sound speed</h4>
<div class="outline-text-4" id="text-sound-speed">
<p>
The <i>sound speed</i> is given by
\[
c_{s}=\sqrt{\frac{\gamma p_{0}}{\rho_{0}}}
= \sqrt{\frac{\gamma kT}{\mu m_{H}}}
\]
The <i>isothermal sound speed</i> is therefore
\[
c_s = \sqrt{\frac{kT}{\mu m_{H}}} = 0.29\,\si{km/s} \; \left( \frac{T_1}{\mu} \right)^{1/2} = 9.1\,\si{km/s} \; \left( \frac{T_4}{\mu} \right)^{1/2} 
\]
where \(\mu\) is the mean particle weight. Note that for ionized hydrogen, \(\mu = 0.5\) and \(c_s = 13\,\si{km/s}\) at \(10^4\) K.
</p>
</div>
</div>

<div id="outline-container-alfven-wave" class="outline-4">
<h4 id="alfven-wave"><span class="section-number-4">1.2.3</span> Alfven wave</h4>
<div class="outline-text-4" id="text-alfven-wave">
<p>
<i>(Need to learn)</i> The Alfven velocity is given by
\(v_{{\rm A}}=B_{0}/\sqrt{4\pi\rho_{0}}\) (in cgs). Therefore, the Alfven
wave crossing time is
\(t_{{\rm act}}=L/v_{{\rm A}}=L\sqrt{4\pi\rho_{0}}/B_{0}\).
</p>

<p>
In He et al. (2019), and , therefore \(v_A / \sigma\) = 0.2, where
\(\sigma\) is the turbulence velocity dispersion.
</p>
</div>
</div>

<div id="outline-container-velocity-dispersion" class="outline-4">
<h4 id="velocity-dispersion"><span class="section-number-4">1.2.4</span> Velocity dispersion</h4>
<div class="outline-text-4" id="text-velocity-dispersion">
</div>
</div>
</div>

<div id="outline-container-jeans-mass" class="outline-3">
<h3 id="jeans-mass"><span class="section-number-3">1.3</span> Jeans Mass</h3>
<div class="outline-text-3" id="text-jeans-mass">
<p>
\[M_{\rm J} \equiv \frac{4\pi}{3}\lambda_{\rm J}^3 \rho
  \approx 20 \msun \cdot \left( \frac{T}{10 {\rm K}}
  \right)^{3/2} \left( \frac{n}{100\,{\rm cm}^{-3}} \right) ^{-1/2}\]
</p>
</div>
</div>


<div id="outline-container-subsec:bondi" class="outline-3">
<h3 id="subsec:bondi"><span class="section-number-3">1.4</span> Bondi Accretion</h3>
<div class="outline-text-3" id="text-subsec:bondi">
</div>

<div id="outline-container-hoyle-and-lyttleton-accretion" class="outline-5">
<h5 id="hoyle-and-lyttleton-accretion"><span class="section-number-5">1.4.0.1</span> Hoyle and Lyttleton accretion</h5>
<div class="outline-text-5" id="text-hoyle-and-lyttleton-accretion">
<p>
A star moving through gas cloud. Assuming a ballistic orbit for accreted
particles, we get a impact factor \[\label{eq:1}
\zeta_{HL} = \frac{2GM}{v_{\infty}^2}.\] and accretion rate (mass flux)
\[\label{eq:1}
\dot{M}_{HL} = \pi \zeta_{HL}^2 v_{\infty} \rho_{\infty} = \frac{4\pi G^2M^2\rho_{\infty}}{v_{\infty}^3}.\]
</p>
</div>
</div>

<div id="outline-container-bondi-accretion" class="outline-5">
<h5 id="bondi-accretion"><span class="section-number-5">1.4.0.2</span> Bondi Accretion</h5>
<div class="outline-text-5" id="text-bondi-accretion">
<p>
A Bondi radius may be defined as \[r_B = \frac{GM}{c_{s}^2(r_B)}\] Flow
outside is subsonic and the density is almost uniform. This ends up with
a Bondi accretion rate
\[\dot{M}_B = 4 \pi r_B^2 c_s \rho_{\infty} = \frac{4\pi
    G^{2}M^{2}\rho_{\infty}}{c_s^{3}}\] And interpolation formula would
be \[\label{eq:bondi}
\dot{M}_B = 4 \pi r_B^2 c_s \rho_{\infty} = \frac{4\pi
  G^{2}M^{2}\rho_{\infty}}{(c_\infty^2 + v_{\infty}^2)^{3/2} }.\]
</p>
</div>
</div>
</div>

<div id="outline-container-subsec:other" class="outline-3">
<h3 id="subsec:other"><span class="section-number-3">1.5</span> Other topics</h3>
<div class="outline-text-3" id="text-subsec:other">
</div>

<div id="outline-container-org47f92d5" class="outline-4">
<h4 id="org47f92d5"><span class="section-number-4">1.5.1</span> Viscosity</h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
<b>Definition of viscosity</b>: The fource \(F\) acting on the top plate of a fluid is proportional to the gradient of the speed \(u\) and the area \(A\) of the plate:
\[
F = \mu A \frac{\partial u}{\partial y},
\]
\(\mu\) is the <i>dynamic viscosity</i> of the fluid, with units of Pa s (pascal-second). The <i>kinematic viscosity</i> is defined as the ratio fo the viscosity \(\mu\) to the fluid density:
\[
\nu = \frac{\mu}{\rho},
\]
with the dimension of \(L^2/T\). 
</p>
</div>
</div>

<div id="outline-container-reynolds-number" class="outline-4">
<h4 id="reynolds-number"><span class="section-number-4">1.5.2</span> Reynolds Number</h4>
<div class="outline-text-4" id="text-reynolds-number">
<p>
\(\mathcal{R}=LV/\nu\), where \(L\) is the typical length of the object, \(V\) is the typical fluid velocity, and \(\nu\) is the viscosity of the fluid. Imagine two different fluid flows around two geometrically similar objects. If these two systems have the same Reynolds number, then the flow patterns should be similar. This is called the law of similarity (Reynolds 1883). Systems with low Reynolds number are dominated by viscosity.
</p>

<p>
There is also the <i>magnetic Reynolds number</i> where the vescosity is replaced with the magnetic diffusivity \(\lambda = c^2 / 4 \pi \sigma\). See Sec. 14.2 of of Choudhuri (1998). 
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org9e55275" class="outline-2">
<h2 id="org9e55275"><span class="section-number-2">2</span> MHD</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgfa902cd" class="outline-3">
<h3 id="orgfa902cd"><span class="section-number-3">2.1</span> MHD</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Within the confines of the magnnetohydrodynamics of a single-component condducting fluid, the material effects of electromagnetic fields enter as two terms:
</p>
<blockquote>
<p>
Lorentz force per unit volume: \({\bf j} \times {\bf B} / c = (\nabla \times {\bf B}) \times {\bf B} / 4\pi\).<br />
Heat production per volume by Ohmic dissipation: \(j^2 / \sigma = \eta | \nabla \times {\bf B} |^2 / 4\pi\)  
</p>
</blockquote>

<p>
Therefore, the equation of continuity is not changed; the equation of motion has to change by adding a magnetic body force, \({\bf j} \times {\bf B} / \rho c\), where \({\bf j} = (c/4\pi) \nabla \times {\bf B}\)  is the electric current density. The energy equation has to add an <i>Ohmic heating</i> term, \({\bf j}^2 / \sigma\) 
</p>

<p>
Reference: Sec. 14.1 of Choudhuri (1998); page 302 of Shu, F. "Gas Dynamics".
</p>
</div>
</div>
</div>

<div id="outline-container-hydrodynamic Al-simulations" class="outline-2">
<h2 id="hydrodynamic Al-simulations"><span class="section-number-2">3</span> Codes</h2>
<div class="outline-text-2" id="text-hydrodynamic Al-simulations">
</div>

<div id="outline-container-methods-and-code" class="outline-3">
<h3 id="methods-and-code"><span class="section-number-3">3.1</span> Hydro Methods and Codes, Summary</h3>
<div class="outline-text-3" id="text-methods-and-code">
<p>
Specification of the flow field:
</p>

<ul class="org-ul">
<li>Euler approach: The fluid properties are written as functions of space and times. Cons: limited dynamic range.</li>

<li>Lagrangian approach: Pieces of the fluid are "tagged". The fluid flow properties are determined by tracking the motion and properties of the particles as they move in time.</li>

<li>Smooth Particles Hydrodynamics (SPH): an intermediate solution. Follows the Lagrangian evolution of the flow, in which resolution elements are defined as appropriate averages over 50 neighboring particles.</li>
</ul>

<p>
Methods of N-body code:
</p>

<ul class="org-ul">
<li>Particle-Mesh: fastest, but only support dynamical range of \(10^3\).</li>

<li>P3M: higher spatial resolution, but significant increase in CPU time.</li>

<li>AP3M: rectangular grids is placed in clustered regions to apply PM
solver.</li>

<li>AMR: Generalization of both AP3M and TREE. e.g. ART.</li>
</ul>

<p>
N-body code:
</p>

<ul class="org-ul">
<li>ART:

<ul class="org-ul">
<li>The first implementation of a grid-based high-resolution N-body code.</li>

<li>AMR: recursively in a fully adaptive manner in the regions where the density exceeds a predefined threshold. Mean number of particles per cell remains roughly constant (around 10).</li>

<li>"Quasi-Lagrangian" approach ensures two-body relaxation remains unimportant.</li>

<li>The mesh structure is not created at every time step, but is properly adjusted to the evolving particle distribution.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-sec:ramses" class="outline-3">
<h3 id="sec:ramses"><span class="section-number-3">3.2</span> RAMSES</h3>
<div class="outline-text-3" id="text-sec:ramses">
</div>

<div id="outline-container-summary" class="outline-4">
<h4 id="summary"><span class="section-number-4">3.2.1</span> Summary</h4>
<div class="outline-text-4" id="text-summary">
<ul class="org-ul">
<li>The AMR grid is built on a tree structure.</li>

<li>The hydrodynamic solver is based on a second order Godunov method, to solve the Euler equation.</li>

<li>Refinement strategy retained for cosmological simulations is based on a "quasi-Lagrangian" mesh evolution.</li>
</ul>
</div>
</div>

<div id="outline-container-features" class="outline-4">
<h4 id="features"><span class="section-number-4">3.2.2</span> Features</h4>
<div class="outline-text-4" id="text-features">
<ul class="org-ul">
<li>Coupling a tree-based AMR hydrodynamical scheme to the N-body solver developed for the ART code.</li>

<li>Hydrodynamical solver: second-order Godunov scheme for perfect gases.</li>
</ul>
</div>
</div>

<div id="outline-container-m1-closure" class="outline-4">
<h4 id="m1-closure"><span class="section-number-4">3.2.3</span> M1 closure</h4>
<div class="outline-text-4" id="text-m1-closure">
<p>
Assume that the radiation field is locally a dipole. The photon distribution function is the Lorentz transform of a Planckian distribution. Dipole is aligned locally to the radiation flux.
</p>

<p>
Under M1, the radiative transfer equation is turned into an hyperbolic system of conservation laws with source terms.
</p>
</div>
</div>

<div id="outline-container-cooling-function" class="outline-4">
<h4 id="cooling-function"><span class="section-number-4">3.2.4</span> Cooling Function</h4>
<div class="outline-text-4" id="text-cooling-function">
<p>
Possibly a big issue!!! I see a mu=1.4 with comments: hard set mu=1.4 to make temperature agree with Audic &amp; Hennebelle.
</p>

<ol class="org-ol">
<li>For hydrogen and helium
<ol class="org-ol">
<li>In each cell, photoheating and radiative cooling of hydrogen and helium is performed by the radiative transfer module of RAMSES-RT as in Rosdahl et al. (2013).</li>
<li>Photoheating rate \(\mathcal{H}\) is a sum of the heating contributiosn from all photoionziation events (HI, HeI, and HeII).</li>
<li>The primordial cooling rate \(\mathcal{L}\) include various cooling processes: collisional ionizations, collisional excitations, recombinations, dielectronic recombinations, bremsstrahlung and Compton cooling.</li>
</ol></li>
<li>For metals
<ol class="org-ol">
<li>'Neutral' function N(T)
<ul class="org-ul">
<li>Below 10^4 K: the prescription of Audit &amp; Hennebelle (2005), which includes <b>carbon, oxygen and dust grains</b> as well as the <b>ambient UV background</b> in the ISM. This is based on the work of Wolfire et al. (1995, 2003).
<ul class="org-ul">
<li>Including cooling by
<ul class="org-ul">
<li>fine-structure lines of CII (92 K)</li>
<li>fine-structure lines of OI (228 and 326 K)</li>
<li>cooling by H (Lyα line)</li>
<li>cooling by electron recombination onto positively charged grains</li>
</ul></li>
<li>and heating by
<ul class="org-ul">
<li>photo-electric effect on small grains and PAHs due to the FUV galactic radiation.</li>
</ul></li>
<li>(This might be probmatic due to the hard mu = 1.4. In Audit2005, they have no radiative transfer, so the mean particle weight is constant at mu = 1.4, while in RAMSES RT, mu is much higher(lower?) due to ionized electrons.)</li>
</ul></li>
<li>Above \(10^4\) K: Sutherland &amp; Dopita (1993)</li>
</ul></li>
<li>'Photoionized' cooling function
<ul class="org-ul">
<li>a piecewise fit to Ferland (2003): \(\Lambda = 3\times10^{-24}~{\rm erg~cm^3~s^{-1}}\) below 9000 K and \(2.2\times10^{-22}~{\rm erg~cm^3~s^{-1}}\) above 10^5 K.</li>
</ul></li>
</ol></li>
<li>For H/He
<ul class="org-ul">
<li>&#x2026;</li>
</ul></li>
</ol>

<p>
TODO: make a curve of the cooling funciton
</p>
</div>

<div id="outline-container-orgf389363" class="outline-5">
<h5 id="orgf389363"><span class="section-number-5">3.2.4.1</span> Thermal update</h5>
<div class="outline-text-5" id="text-3-2-4-1">
<p>
\[
\frac{\partial e}{\partial t} = \Gamma \equiv {\cal H} + {\cal L}
\]
where \({\cal H}\) is the photoheating rate and \({\cal L}\) is the cooling rate.
</p>

<p>
The photoheating rate \({\cal H}\) is a sum of the heating contributions form all photoionization events, calculated with the discretization into M photon groups.
</p>

<p>
The various cooling processes are collisional ionizations/excitations, recombinations, dielectronic recombinations, bremsstrahlung, and Compton cooling.
</p>

<p>
<b>On-the-spot approximation</b> recombination-emitted photons are absorbed ‘on the spot’ by a near-lying atom (in the same cell), and hence these photon emissions cancel out by local photon absorptions. When OTSA is assumed, the gas is not photoemitting, and the case A recombination rates are replaced with case B recombination rates
</p>
</div>
</div>

<div id="outline-container-orgf89dfe9" class="outline-5">
<h5 id="orgf89dfe9"><span class="section-number-5">3.2.4.2</span> In code</h5>
<div class="outline-text-5" id="text-3-2-4-2">
<p>
<code>ramses/patch/frig/main/cooling_module_frig.f90</code>:
</p>
<ul class="org-ul">
<li>cooling_low(T, n, ref): low-T cooling</li>
<li>cooling_high(T, n, ref): high-T cooling</li>
</ul>
</div>
</div>

<div id="outline-container-orge644929" class="outline-5">
<h5 id="orge644929"><span class="section-number-5">3.2.4.3</span> Other notes</h5>
<div class="outline-text-5" id="text-3-2-4-3">
<p>
Mean particle mass, \(\mu\), is correctly calculated by the function <code>getMu</code> in main/rt_cooling_module.f90:
</p>

<p>
\[
\mu = [X(1+x_{\rm HII}) + \frac{Y}{4}(1 + x_{\rm HeII} + 2x_{\rm HeIII})]^{-1}
\]
Note that in the most basic H and He senario, we have \(1/\mu = X/1 + Y/4\). 
</p>
</div>
</div>
</div>

<div id="outline-container-org5fecfab" class="outline-4">
<h4 id="org5fecfab"><span class="section-number-4">3.2.5</span> Sink particles</h4>
<div class="outline-text-4" id="text-3-2-5">
<ul class="org-ul">
<li>IR feedback from accretion: exists in current version. Use <code>ir_feedback</code> under <span class="underline">Feedback parameters</span>.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-n-body" class="outline-3">
<h3 id="n-body"><span class="section-number-3">3.3</span> N-body</h3>
<div class="outline-text-3" id="text-n-body">
<p>
The density field is computed using the 'Cloud-In-Cell' (CIC) interpolation scheme. The Poisson equation at the course level is solved using standard FFT technique. For fine levels, the potential is found using a relaxation method. The acceleration is then calculated using the 6-points finite difference approximation of the gradient. Variable time steps: a second-order midpoint scheme that reduces exactly to the leapfrog scheme for constant time steps.
</p>
</div>
</div>

<div id="outline-container-hydro" class="outline-3">
<h3 id="hydro"><span class="section-number-3">3.4</span> Hydro Codes</h3>
<div class="outline-text-3" id="text-hydro">
</div>

<div id="outline-container-orgb66a838" class="outline-4">
<h4 id="orgb66a838"><span class="section-number-4">3.4.1</span> Fire</h4>
<div class="outline-text-4" id="text-3-4-1">
<p>
The FIRE simulations use the P-SPH code, a heavily modified version of Volker Springel’s Gadget 3 code whose development is led by Phil Hopkins. In addition to the explicit ISM and stellar feedback physics, P-SPH uses apressure-entropy implementation of smooth particle hydrodynamics (SPH) that resolves all the main historical discrepancies between grid-based and SPH methods, particularly for fluid mixing instabilities.
</p>
</div>
</div>

<div id="outline-container-org677fc9a" class="outline-4">
<h4 id="org677fc9a"><span class="section-number-4">3.4.2</span> </h4>
</div>
</div>

<div id="outline-container-observations" class="outline-3">
<h3 id="observations"><span class="section-number-3">3.5</span> Mock Observations</h3>
<div class="outline-text-3" id="text-observations">
</div>

<div id="outline-container-stellar-population-sythesis" class="outline-4">
<h4 id="stellar-population-sythesis"><span class="section-number-4">3.5.1</span> Stellar population sythesis</h4>
<div class="outline-text-4" id="text-stellar-population-sythesis">
<p>
FSPS: Flexible Stellar Population Synthesis:
<a href="https://github.com/cconroy20/fsps">https://github.com/cconroy20/fsps</a>
</p>

<p>
pythonFSPS (Flexible Stellar Population Synthesis for Python):
<a href="http://dfm.io/python-fsps/current/">http://dfm.io/python-fsps/current/</a>
</p>

<p>
Starburst99
</p>

<ul class="org-ul">
<li><a href="https://github.com/rjtanner/StarburstPy">https://github.com/rjtanner/StarburstPy</a></li>
<li><a href="https://github.com/Morisset/pyStb99">https://github.com/Morisset/pyStb99</a></li>
</ul>

<p>
<a href="https://users.astro.ufl.edu/~desika.narayanan/courses/ism_spring19/hw4.pdf">https://users.astro.ufl.edu/~desika.narayanan/courses/ism_spring19/hw4.pdf</a>
</p>
</div>
</div>

<div id="outline-container-filters" class="outline-4">
<h4 id="filters"><span class="section-number-4">3.5.2</span> Filters</h4>
<div class="outline-text-4" id="text-filters">
<p>
JWST/NIRCam.F150W:
<a href="http://svo2.cab.inta-csic.es/svo/theory/fps3/index.php?id=JWST/NIRCam.F150W&amp;&amp;mode=browse&amp;gname=JWST&amp;gname2=NIRCam">http://svo2.cab.inta-csic.es/svo/theory/fps3/index.php?id=JWST/NIRCam.F150W&amp;&amp;mode=browse&amp;gname=JWST&amp;gname2=NIRCam</a>
</p>

<p>
Table of FSPS Filters: <a href="http://dfm.io/python-fsps/current/filters/">http://dfm.io/python-fsps/current/filters/</a>
</p>

<p>
SDSS Filters on astroML:
<a href="https://www.astroml.org/book_figures/appendix/fig_sdss_filters.html">https://www.astroml.org/book_figures/appendix/fig_sdss_filters.html</a>
</p>
</div>
</div>
</div>
</div>

<div id="outline-container-org166d59f" class="outline-2">
<h2 id="org166d59f"><span class="section-number-2">4</span> Simulation Projects</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org8fa54d5" class="outline-3">
<h3 id="org8fa54d5"><span class="section-number-3">4.1</span> FIRE: Feedback In Realistic Environments</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<a href="https://fire.northwestern.edu/">https://fire.northwestern.edu/</a>
</p>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p>Author: ChongChong He</p><p></p><p><a href='https://www.astro.umd.edu/~chongchong/'>www.astro.umd.edu/~chongchong/</a></p>
</div>
</body>
</html>